<!DOCTYPE html>
<html>
<head>
    <title>Rasti icons</title>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width, initial-scale=1 maximum-scale=1">

    <style>
        [icon]:before { background-color: #bbb; } 
    </style>
</head>

<body rasti=app hidden>

<div page=main class="fullh col" header="Rasti Icons">

    <input class="row-1"
        onkeydown="if (event.key == 'Enter') app.render('icons', this.value.split(' '))"
        placeholder="write any icon names" >
    
    <div class="row-3 fullw scrolly list"
        auto template=categories label
        fx=stack bg=mid
        on-click=selectCategory >

        <div value=${data}>${data}</div>

    </div>

    <div class="row row-7" bg=mid>

        <div class="scrolly normal round_ inline_"
            template=icons
            fx=stamp
            style="padding: 10px;" >

            <div icon=${data} class="textc" 
                style="margin: 1vw; font-size: 1rem">${data}</div>

        </div>

        <input prop=color type=range min=0 max=4 step=1 value=1 bg=dark
            style="transform: rotateZ(-90deg); width: auto;
                position: absolute; right: -40px; bottom: 70px;">

    </div>

    <div class="row-1 inline_" bg=light>
        <div bound template style="font-size: 1.5em;">
            <div style="color: ${ 'red blue green yellow violet'.split(' ')[props.color] }">Size: ${ 'small normal big huge'.split(' ')[props.size] }</div>
        </div>
        <div icon=remove on-click=decSize style="cursor: pointer;"></div>
        <div icon=add on-click=incSize style="cursor: pointer;"></div>
    </div>

</div>


<script src="../dist/rasti+zepto.js"></script>

<script>

	app.extend({

        props : {
            size : 1,
        },

        data : {
            categories : Object.keys(rasti.icons),
            icons : {},
        },
    
        methods : {

            changeSize : e => {
                const el = $('[template=icons]')[0]
                const cn = el.className
                const mods = 'small_ normal big_ huge_'.split(' ')
                mods.forEach((m, i) => {
                    if (cn.indexOf(m) > -1)
                        el.className = cn.replace(m, mods[props.size])
                })
            },
    
            incSize : e => {
            	if (props.size >= 3) return
                props.size++
                methods.changeSize()
            },

            decSize : e => {
            	if (props.size <= 0) return
                props.size--
                methods.changeSize()
            },

            selectCategory : e => {
                app.render('icons', app.data.icons[$(e.target).attr('value')])
            }

        }

    })

    app.data.categories.forEach(cat => app.data.icons[cat] = Object.keys(rasti.icons[cat]))

    app.init({theme:'base dark'})

</script>

</body>
