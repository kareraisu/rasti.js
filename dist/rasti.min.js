(function(b){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=b();else if("function"==typeof define&&define.amd)define([],b);else{var c;c="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,c.rasti=b()}})(function(){return function j(k,m,q){function v(y,z){if(!m[y]){if(!k[y]){var A="function"==typeof require&&require;if(!z&&A)return A(y,!0);if(w)return w(y,!0);var B=new Error("Cannot find module '"+y+"'");throw B.code="MODULE_NOT_FOUND",B}var C=m[y]={exports:{}};k[y][0].call(C.exports,function(D){var E=k[y][1][D];return v(E?E:D)},C,C.exports,j,k,m,q)}return m[y].exports}for(var w="function"==typeof require&&require,x=0;x<q.length;x++)v(q[x]);return v}({1:[function(j,k){k.exports={buttons:j("./buttons"),checks:j("./checks"),radios:j("./radios"),multi:j("./multi"),select:j("./select")}},{"./buttons":2,"./checks":3,"./multi":4,"./radios":5,"./select":6}],2:[function(j,k){const q=j("../utils");k.exports={template:function(v){var x="";for(var y of v)y=q.checkData(y),x+=`<div value="${y.value}">${y.label}</div>`;return x},init:function(v){v.find("div").click(function(){var x=$(this);x.parent().val(x.attr("value")).trigger("change")}),v.change(function(){var x=$(this);x.children().removeClass("active"),x.find("[value=\""+x.val()+"\"]").addClass("active")})},style:`[rasti=buttons] > div {display: inline-block;margin: 5px !important;padding: 5px 10px;border-radius: 6px;border: 2px outset rgba(255, 255, 255, 0.5);background-clip: padding-box;cursor: pointer;}[rasti=buttons] > div.active {filter: contrast(1.5);border-style: inset;padding: 4px 11px 6px 9px;transform: translateY(-1px);}
`}},{"../utils":8}],3:[function(j,k){const q=j("../utils");k.exports={template:function(v){var x=q.random(),y="";for(var z of v)z=q.checkData(z),y+=`<div><input type="checkbox" name="${x}[]" value="${z.value}"><label>${z.label}</label></div>`;return y},init:function(v){v[0].value=[],v.find("input").change(function(){var x=$(this),y=x.attr("value"),z=x.closest("[rasti=checks]")[0].value;x.prop("checked")?z.push(y):z.remove(y)}),v.find("input +label").click(function(){var x=$(this);x.prev().click()}),v.change(function(){var y,z,x=$(this);x.find("input").each(function(A,B){y=$(B),z=x[0].value.includes(y.attr("value")),y.prop("checked",z)})})},style:`[rasti=checks]>div {height: 24px;padding-top: 5px}
`}},{"../utils":8}],4:[function(j,k){const q=j("../utils");k.exports={template:function(v,w){var x=w[0].hasAttribute("filter")?`<input field type="text" placeholder="${w.attr("filter")||self.options.multiFilterText}"/>`:"";for(var y of v)y=q.checkData(y),x+=`<option value="${y.value}" alias="${y.alias}">${y.label}</option>`;return x},init:function(v){function w(){var D=B.children().length,E=x.value.length-D,F=D>=(x.max||x.total);return F?(0<E&&(x.value=x.value.slice(0,D),rasti.warn("Dropped %s overflowed values in el:",E,x)),v.addClass("full"),q.onMobile()&&z.parent().removeClass("backdrop"),z.hide()):v.removeClass("full"),F}var x=v[0],y=v.attr("field"),z=v.closest("[page]").find("[options="+y+"]"),A=q.is.number(x.total);if(x.value=[],x.total=z.children().length,x.max=parseInt(v.attr("max")),A)return v.find("[selected]").empty(),void v.removeClass("full");v.prepend("<div add>"),v.append("<div selected>");var B=v.find("[selected]");v.on("click",function(){z.siblings("[options]").hide(),q.onMobile()&&z.parent().addClass("backdrop"),z.css("left",this.getBoundingClientRect().right).show(),z.find("input").focus()}),v.closest("[page]").on("click","*:not(option)",function(D){$(D.target).attr("field")===y||$(D.target).parent().attr("field")===y||(q.onMobile()&&z.parent().removeClass("backdrop"),z.hide())});var C=function(D){D.stopPropagation(),z.find("input").focus();var E=$(D.target),F=E.attr("value"),G=v[0].value;E.parent().attr("options")?(v.find("[selected]").append(E),G.push(F)):(z.append(E),G.remove(F)),w(),v.trigger("change",{ui:!0})};v.on("click","option",C),z.on("click","option",C),z.on("click",function(){z.find("input").focus()}),z.on("input","input",function(){this.value?z.find("option").hide().filter("[alias*="+this.value+"]").show():z.find("option").show()}),v.on("change",function(D,E){if(!(E&&E.ui)){B.children().each(function(G,H){z.append(H)});for(var F of x.value)if(B.append(z.find("[value="+F+"]")),w())break}})},style:`[rasti=multi] {position: relative;min-height: 35px;padding-right: 20px;text-shadow: 0 0 0 #000;cursor: pointer;}[rasti=multi] [add] {display: flex;align-items: center;position: absolute;right: 0;top: 0;height: 100%;width: 20px;border-left: 1px solid rgba(0,0,0,0.2);}[rasti=multi] [add]:before {content: '〉';padding-top: 2px;padding-left: 6px;}[rasti=multi].open [add] {box-shadow: inset 0 0 2px #000;}[rasti=multi].full {padding-right: 5px;}[rasti=multi].full [add] {display: none;}[rasti=multi] option {padding: 2px 0;}[rasti=multi] option:before {content: '✕';display: inline-block;box-sizing: border-box;height: 20px;width: 20px;margin-right: 5px;border-radius: 50%;text-align: center;line-height: 1.5;}[rasti=multi] [selected] {max-height: 100px;overflow-y: auto;}[rasti=multi] [selected]>option:hover:before {color: #d90000;background-color: rgba(255, 0, 0, 0.5);}[rasti=multi][options] {display: none;position: absolute;top: 0;width: 250px;height: 100%;padding: 5px 10px;border: 1px solid;z-index: 10;overflow-y: auto;}[rasti=multi][options]>option:before {transform: rotate(45deg);}[rasti=multi][options]>option:hover:before {color: #008000;background-color: rgba(0, 128, 0, 0.5);}[rasti=multi][options] input {border: 1px solid #000;margin: 10px 0;}

`}},{"../utils":8}],5:[function(j,k){const q=j("../utils");k.exports={template:function(v){var x=q.random(),y="";for(var z of v)z=q.checkData(z),y+=`<div><input type="radio" name="${x}[]" value="${z.value}"><label>${z.label}</label></div>`;return y},init:function(v){v.find("input").change(function(){var x=$(this);x.closest("[rasti=radios]").val(x.attr("value"))}),v.find("input +label").click(function(){var x=$(this);x.prev().click()}),v.change(function(){var x=$(this);x.find("[value=\""+x.val()+"\"]").prop("checked",!0)})},style:`[rasti=radios]>div {height: 24px;padding-top: 5px}
`}},{"../utils":8}],6:[function(j,k){const q=j("../utils");k.exports={template:function(v){var x="";for(var y of v)y=q.checkData(y),x+=`<option value="${y.value}">${y.label}</option>`;return x},init:function(v){var w=v.attr("img");if(w){var x=v.find("[selected]"),y=$("<div select>"),z=$("<div options>");$.each(v[0].attributes,function(){y.attr(this.name,this.value)}),v.wrap(y),y=v.parent(),y.append("<div caret>&#9660</div>"),v.attr("data")||v.find("option").each(function(B){z.append(`<div value="${B.value}">${B.innerHTML}</div>`)}),y.append(z),z=z.children();var A=x.length?x.index():0;z[A].classList.add("selected"),y.val(v.val()||z[A].getAttribute("value")),setImg(y,w),z.each(function(B,C){setImg($(C),w)}),z.click(function(){var C=$(this);C.siblings().removeClass("selected"),C.addClass("selected");var D=C.closest("[select]");D.val(C.attr("value"));var E=D.attr("img");E&&setImg(D,E)}),v.remove()}},style:`[select] select {display: none;}[select] {cursor: pointer;border-radius: 4px;}[select]:hover [options] {display: block;}[select] [options] {display: none;position: absolute;margin-top: 42px;margin-left: -4px;border: 4px solid #b9b9b9;border-radius: 4px;}[select] [options] div:hover {border: 4px solid #fff;}[select] [options] div.selected {border: 2px solid #0f97bd;}[select] [caret] {float: right;margin-top: 15px;margin-right: 5px;font-size: small;}[select][img] {padding: 0;}
`}},{"../utils":8}],7:[function(j,k){var q=j("./utils"),v=q.is,w=q.type,x=q.sameType;k.exports=function(y){function E(aa,ba,ca){var da=Y.pages[aa],ea=$("[page="+aa+"]");return ea?void(Y.active.page=ea,ba&&!v.object(ba)&&X("Page [%s] nav params must be an object!",aa),da&&da.nav&&(v.function(da.nav)?da.nav(ba):X("Page [%s] nav property must be a function!",aa)),$("[page].active").removeClass("active"),Y.active.page.addClass("active"),$(document).trigger("rasti-nav"),ca||(da&&da.url?v.string(da.url)?window.history.pushState(aa,null,"#"+da.url):V("Page [%s] url property must be a string!",aa):window.history.pushState(aa,null))):X("Page [%s] container not found",aa)}function F(aa,ba,ca){var ea,da=Y.templates[aa];if(!da)return X("Template [%s] is not defined",aa);if(v.string(da)&&(ea=da,da=function(na){return na.map(function(){return ea}).join()}),!v.function(da))return X("Template [%s] must be a string or a function",aa);var fa=$("[template="+aa+"]");if(!fa.length)return X("No element bound to template [%s]. Please bind one via [template] attribute.",aa);var ga=fa[0];if(!ba){var ha=fa.attr("data");if(!ha)return X("No data found for template [%s]. Please provide in ajax response or via [data] attribute in element:",aa,ga);if(ba=Y.data[ha],!ba)return X("Undefined data source \"%s\" in [data] attribute of element:",ha,ga)}if(!ba.length)return fa.html(`<div msg center textc>${Y.options.noData}</div>`);var ia=fa.attr("paging"),ja=Y.langs&&Y.langs[Y.active.lang];if(ia?M(fa,da,ba,ja):fa.html(da(ba,ja)),ga.hasAttribute("stats")){var ka=$("<div section class=\"stats\">");ka.html(Y.options.stats.replace("%n",ba.length).replace("%t",ca)),fa.prepend(ka)}var la=fa.attr("fx");if(la){var ma=Y.fx[la];if(!ma)return X("Undefined fx \"%s\" in [fx] attribute of element",la,ga);ia?ma(fa.find(".results")):ma(fa)}}function G(aa){var ba=aa.split(" ")[0],ca=Y.themes[ba];if(!ca)return X("Theme [%s] not found",ba);var da=aa.split(" ")[1]||v.object(ca.maps)&&Object.keys(ca.maps)[0]||"dark",ea=v.object(ca.maps)&&ca.maps[da]||Y.themeMaps[da];if(!ea)return X("Theme map [%s] not found",da);V("Setting theme [%s:%s]",ba,da),Y.active.theme=ba;var ga,ha,ia,ja,ka,fa={font:ca.font||Y.themes.base.font};for(var la of Object.keys(ea)){if(!Y.themeMaps.dark[la])return X("Mapping error in theme [%s]. Incorrect theme map property [%s]",ba,la);for(var ma in ga=[ia,ja]=ea[la].split(" "),ha=[ca.palette[ia],ca.palette[ja]],ha)ka=Y.themeMaps.dark[la].split(" ")[ma],ka&&!ha[ma]&&(ha[ma]=Y.themes.base.palette[ga[ma]],!ha[ma]&&(W("Mapping error in theme [%s] for attribute [%s]. Color [%s] not found. Falling back to default color [%s].",ba,la,ga[ma],ka),ha[ma]=Y.themes.base.palette[ka]));fa[la]=ha}$("style[theme]").html(R(fa));for(var na of Object.keys(ca.palette)){var oa=ca.palette[na];$("."+na).css("background-color",oa)}}function H(aa){var ba=Y.langs[aa];if(!ba)return X("Lang [%s] not found",aa);if(!v.object(ba))return X("Lang [%s] must be an object!",aa);V("Setting lang [%s]",aa),Y.active.lang=aa;var da,ea,fa,ca=$(),ga="label header text placeholder".split(" ");ga.forEach(function(ha){ca=ca.add("["+ha+"]")}),ca.each(function(ha,ia){for(var ja in ia.hasAttribute("fixed")&&(ia=ia.children[0]),da=$(ia),ea=ia.langkeys,ea||(ea={},ga.forEach(function(ka){da.attr(ka)&&(ea[ka]=da.attr(ka))}),ia.langkeys=ea),ea)fa=S(aa,ea[ja]),"text"==ja?da.text(fa||ea[ja]):fa?da.attr(ja,fa):null}),Object.keys(Y.defaults).forEach(function(ha){Y.options[ha]=ba["rasti_"+ha]||Y.defaults[ha]})}function I(aa,ba){function ca(ka){if(ha.html(fa.template(ka,aa)),Z){var la=aa.attr("field"),ma=aa.closest("[page]").attr("page");W("Detected %s invalid data entries for field [%s] in page [%s]",Z,la,ma),Z=0}}var da=aa[0],ea="SELECT"==da.nodeName?"select":aa.attr("rasti");if(!ea)return X("Missing block type, please provide via [rasti] attribute in element:",da);var fa=Y.blocks[ea];if(!fa)return X("Undefined block type \"%s\" in [rasti] attribute of element:",ea,da);if(!ba){var ga=aa.attr("data");if(!ga)return X("Missing datakey, please provide via [data] attribute in element:",da);if(ba=Y.data[ga],!ba)return X("Undefined data source \"%s\" in [data] attribute of element:",ga,da)}var ha,ia;if("multi"===ea){var ia=aa.attr("field");if(!ia)return X("Missing [field] attribute value in element:",da);ha=aa.closest("[page]").find("[options="+ia+"]"),ha.length||(ha=$("<div field rasti="+ea+" options="+ia+">"),aa.closest("[page]").children(".page-options").append(ha))}else ha=aa;v.function(ba)?ba(ca):ca(ba)}function K(aa){function ba(ja){return Y.active.page.find(ja).length||Y.active.page.attr("page")===ja.attr("page")}var ga,ha,ia,ca=aa[0],da=aa.children(":not(.page-options)"),ea=$("<div class=\"tab-labels\">"),fa=$("<div class=\"bar\">");da.each(function(ja,ka){ga=$(ka),ga.attr("tab",ja),ha=ga.attr("label")||ga.attr("header")||ga.attr("name")||"TAB "+(ja+1),ea.append($(`<div tab-label=${ja} text="${ha}">`))}),ea.append(fa).appendTo(aa),ea.on("click",function(ja){var ka=$(ja.target),la=ka.attr("tab-label"),ma=da.filter(`[tab="${la}"]`);da.removeClass("active"),ma.addClass("active")[0].scrollIntoView(),ea.children().removeClass("active"),ka.addClass("active")}),aa.on("scroll",function(){ia=ca.scrollLeft/ca.scrollWidth,fa.css({left:ia*ca.offsetWidth})}),$(document).on("rasti-nav",function(){ba(aa)&&(fa.css({width:ca.offsetWidth/da.length}),!ea.children(".active").length&&ea.children().first().click())}),$(window).on("resize",function(){ba(aa)&&(ea.find(".active").click(),fa.css({width:ca.offsetWidth/da.length}))})}function L(aa){var ba=aa[0],ca="SELECT"==ba.nodeName?"select":aa.attr("rasti");if(!ca)return X("Missing block type, please provide via [rasti] attribute in element:",ba);var da=Y.blocks[ca];return da?void(aa.attr("data")&&I(aa),da.init(aa)):X("Undefined block type \"%s\" in [rasti] attribute of element:",ca,ba)}function M(aa,ba,ca,da){function ea(ma){$results.html(ba(ma,da)),$controls.find(".page").html(ia.page+"/"+ia.total),v.function(ga)&&ga($results)}var ja,ka,la,fa=aa.attr("template"),ga=aa.attr("fx")&&Y.fx[aa.attr("fx")],ha=parseInt(aa.attr("paging")),ia=O(fa,ca,ha);aa[0].hasAttribute("columns")&&(ka=`<div class="columns floatl ib_"><label>Columns:</label><button btn>1</button><button btn value=2>2</button><button btn value=3>3</button></div>`),1<ia.total&&(ja=`<div class="paging ib_"><button class="btn prev">&lt;</button><span class="page"></span><button class="btn next">&gt;</button></div>`),la=`<div class="sizes floatr ib_"><label>Page size:</label><button btn value=5>5</button><button btn value=10>10</button><button btn value=20>20</button></div>`,aa.html(`<div class="results scrolly"></div><div class="controls small bottom centerx ib_">${ka||""}${ja||""}${la}</div>`),$controls=aa.children(".controls"),$results=aa.children(".results"),$controls.on("click",".next",function(){ea(ia.next())}),$controls.on("click",".prev",function(){ea(ia.prev())}),$controls.on("click",".sizes button",function(){ia.setPageSize(this.value),ea(ia.next()),1<ia.total?$controls.find(".paging").show():$controls.find(".paging").hide()}),$controls.on("click",".columns button",function(){$results.removeClass("columns-2 columns-3").addClass(this.value?"columns-"+this.value:"")}),$results.html(ba(ia.next(),da)),$controls.find(".page").html(ia.page+"/"+ia.total)}function O(aa,ba,ca){let da=new _(aa,ba,ca);return Y.pagers.set(aa,da),da}function Q(aa,ba){var ca=Y.ajax[aa];if(!v.function(ca))return X("Ajax method ["+aa+"] is not defined");var da=$("[ajax="+aa+"]");if(!da.length)return X("No container element bound to ajax method [%s]. Please bind one via [ajax] attribute",aa);var fa,ea={};da.find("[field]").each(function(ga,ha){$el=$(ha),fa=$el.attr("field"),fa&&(ea[fa]=$el.val()||$el.attr("value"))}),ca(ea,ba)}function R(aa){return`body {font: ${aa.font};color: ${aa.text[0]};}[page]    { background-color: ${aa.page[0]}; }[panel]   { background-color: ${aa.panel[0]}; }[section] { background-color: ${aa.section[0]}; }
[page][header]:before    { background-color: ${aa.page[1]}; }[panel][header]:before   { background-color: ${aa.panel[1]}; }[section][header]:before { background-color: ${aa.section[1]}; }
[tabs] > .tab-labels        { background-color: ${aa.panel[0]}; }[tabs] > .tab-labels > .bar { background-color: ${aa.btn[0]}; }
[field] {background-color: ${aa.field[0]};color: ${aa.field[1]};}
[btn], .btn, [rasti=buttons] > div {background-color: ${aa.btn[0]};color: ${aa.btn[1]}; }
[header]:before { color: ${aa.header[0]}; }[label]:not([header]):before  { color: ${aa.label[0]}; }`}function S(aa,ba){if(!v.object(Y.langs[aa]))return void X("Lang [%s] is not defined",aa);var ca=Y.langs[aa][ba];return v.string(ca)?ca:void W("Lang [%s] does not contain key [%s]",aa,ba)}function T(aa){var ba=$(`<div fixed label="${aa.attr("label")}" >`);aa.wrap(ba),aa[0].removeAttribute("label")}function V(...aa){"DEBUG"==Y.options.log&&console.log.call(this,...aa)}function W(...aa){Y.options.log&&console.warn.call(this,...aa)}function X(...aa){console.error.call(this,...aa)}var Y=this,Z=0;this.name="rasti."+y.replace(" ",""),this.active={page:null,theme:"",lang:""},this.pagers=new Map,this.options={log:!1,state:!1,root:"",theme:"base",lang:""},this.defaults={stats:"%n results in %t seconds",noData:"No data available"},this.state={},Object.defineProperties(Y.state,{page:{get:function(){return Y.active.page.attr("page")},enumerable:!0},theme:{get:function(){return Y.active.theme},enumerable:!0},lang:{get:function(){return Y.active.lang},enumerable:!0},save:{value:function(){localStorage.setItem(Y.name,JSON.stringify(Y.state)),V("State saved")}},get:{value:function(){function aa(){X("Saved state for app [%s] is invalid",Y.name)}var ba;try{if(ba=JSON.parse(localStorage.getItem(Y.name)),!ba)V("No saved state found for app [%s]",Y.name);else if(!v.object(ba))aa();else return ba}catch(ca){aa()}}},restore:{value:function(){var aa=Y.state.get();if(aa){for(let ba in aa)Y.state[ba]=aa[ba];aa.theme&&G(aa.theme),aa.lang&&H(aa.lang),E(Y.state.page),V("State restored")}return aa}},clear:{value:function(){localStorage.removeItem(Y.name)}}}),this.pages={},this.data={},this.ajax={},this.utils={is:v,type:w,sameType:x},this.templates={},this.langs={},this.themes={base:{font:"normal 14px sans-serif",palette:{white:"#fff",lighter:"#ddd",light:"#bbb",mid:"#888",dark:"#444",darker:"#222",black:"#000",detail:"darkcyan",lighten:"rgba(255,255,255,0.1)",darken:"rgba(0,0,0,0.1)"}}},this.themeMaps={dark:{page:"darker lighten",panel:"dark lighten",section:"mid lighten",field:"light darker",btn:"detail darker",header:"darker",label:"darker",text:"darker"},light:{page:"lighter darken",panel:"mid lighten",section:"light darken",field:"lighter dark",btn:"detail light",header:"dark",label:"mid",text:"dark"}},this.fx={stack:function(aa){aa.children().each(function(ba,ca){setTimeout(function(){ca.style.opacity=1,ca.style.marginTop="15px"},50*ba)})}},this.blocks=j("./blocks/all");class _{constructor(aa,ba,ca){return(this.id=aa,!v.string(aa))?X("Pager id must be a string"):(this.logid=`Pager for template [${this.id}]:`,v.array(ba)?v.number(ca)?void(this.results=ba,this.page_size=ca,this.page=0,this.total=Math.ceil(this.results.length/this.page_size)):X("%s Page size must be a number",this.logid):X("%s Results must be an array",this.logid))}next(){return this.hasNext()?this.page++:W("%s No next page",this.logid),this.getPageResults(this.page)}prev(){return this.hasPrev()?this.page--:W("%s No previous page",this.logid),this.getPageResults(this.page)}hasNext(){return this.results.length>this.page*this.page_size}hasPrev(){return 1<this.page}setPageSize(aa){return aa=parseInt(aa),v.number(aa)?void(this.page_size=aa,this.page=0,this.total=Math.ceil(this.results.length/this.page_size)):X("%s Must specify a number as the page size",this.logid)}getPageResults(aa){if(!v.number(aa))return X("%s Must specify a page number to get results from",this.logid),[];try{var ba=(aa-1)*this.page_size;return this.results.slice(ba,ba+this.page_size)}catch(ca){return X("%s Could not get results of page %s, error:",this.logid,aa,ca),[]}}}return function(){Array.prototype.remove=function(aa){var ba=this.indexOf(aa);0<=ba&&this.splice(ba,1)},String.prototype.capitalize=function(){return this.length&&this[0].toUpperCase()+this.slice(1).toLowerCase()}}(),k.exports.log=V,k.exports.warn=W,k.exports.error=X,Object.freeze({state:this.state,pages:this.pages,data:this.data,ajax:this.ajax,utils:this.utils,langs:this.langs,themes:this.themes,themeMaps:this.themeMaps,blocks:this.blocks,templates:this.templates,fx:this.fx,options:this.options,config:function(aa){for(var ba in Y)"object"===$.type(Y[ba])&&"object"===$.type(aa[ba])&&Object.assign(Y[ba],aa[ba])},init:function(aa){v.object(aa)?Object.keys(Y.options).forEach(function(ia){aa[ia]&&(x(Y.options[ia],aa[ia])?Y.options[ia]=aa[ia]:W("Init option [%s] is invalid",ia))}):W("Init options must be an object"),Object.keys(Y.defaults).forEach(function(ia){Y.options[ia]||(Y.options[ia]=Y.defaults[ia])}),Y.options.lang||(keys=Object.keys(Y.langs),keys.length&&(Y.options.lang=keys[0]));var ba="<style blocks>";for(var ca in Y.blocks)ba+=Y.blocks[ca].style;ba+="</style>",$("body").append(ba),$("body").append("<style theme>"),$("[page]").each(function(ia,ja){$(ja).append("<div class=\"page-options\">")}),$("[rasti]").each(function(ia,ja){L($(ja))}),$("select[data]").each(function(ia,ja){I($(ja))}),$("[tabs]").each(function(ia,ja){K($(ja))}),$("[nav]").click(function(){var ja=$(this),ka=ja.attr("nav"),la={};if(!ka)return X("Please provide a page name in [nav] attribute of element:",el);if(this.hasAttribute("params")){var ma=Y.active.page,na=ja.attr("params");na?(na=na.split(" "),na.forEach(function(oa){la[oa]=ma.find("[navparam="+oa+"]").val()})):ma.find("[navparam]").each(function(oa,pa){return ja=$(pa),ca=ja.attr("navparam"),ca?void(la[ca]=ja.val()):X("Please provide a param name in [navparam] attribute of element:",pa)})}E(ka,la)}),$("[submit]").click(function(){var pa,ja=$(this),ka=ja.attr("submit"),la=ja.attr("then"),ma=ja.attr("render"),na=la&&v.function(Y.utils[la]),oa=window.performance.now();return ka?void(la&&!na&&X("Utility method [%s] provided in [then] attribute is not defined",la),ja.addClass("loading").attr("disabled",!0),Q(ka,function(qa){pa=window.performance.now();var ra=Math.floor(pa-oa)/1e3;V("Ajax method [%s] took %s seconds",ka,ra),na&&Y.utils[la](qa),ma&&F(ma,qa,ra),ja.removeClass("loading").removeAttr("disabled")})):X("Plase provide an ajax method in [submit] attribute")}),$("[render]").not("[submit]").click(function(){var ja=$(this),ka=ja.attr("render");return ka?void F(ka):X("Please provide a template name in [render] attribute of element:",el)});for(var da of"click change".split(" "))$("["+da+"]").each(function(ia,ja){var ka=$(ja),la=ka.attr(da);return app.utils[la]?void $(this).on(da,app.utils[la]):X("Undefined utility method \"%s\" declared in [%s] attribute of element:",la,da,ja)});var ea,fa;for(var ga in Y.pages){if(ea=Y.pages[ga],!v.object(ea))return X("Page [%s] must be an object!",ga);if(fa=$("[page="+ga+"]"),!fa.length)return X("No container element bound to page [%s]. Please bind one via [page] attribute",ga);if(ea.init){if(!v.function(ea.init))return X("Page [%s] init property must be a function!",ga);V("Initializing page [%s]",ga),Y.active.page=fa,ea.init()}}"input select textarea".split(" ").forEach(function(ia){$(ia+"[label]").each(function(ja,ka){T($(ka))})}),window.onpopstate=function(ia){var ja=ia.state||location.hash.substring(1);ja?ia.state?E(ja,null,!0):E(ja):E(Y.options.root)};var ha;if(Y.options.state&&(ha=Y.state.restore(),$(window).on("beforeunload",function(){Y.state.save()})),!Y.options.state||!ha){Y.options.lang&&!Y.active.lang&&H(Y.options.lang),Y.options.lang||$("[text]").each(function(ia,ja){$(ja).text($(ja).attr("text"))}),Y.active.theme||G(Y.options.theme);var ea=location.hash.substring(1)||Y.options.root;E(ea&&Y.pages[ea]?ea:$("[page]").first().attr("page"))}$("[state]").each(function(ia,ja){function ka(na,oa,pa){var qa=Y.state;pa&&(qa[oa]=qa[oa]||{},qa=qa[oa],oa=pa),qa[oa]?(na.val(qa[oa]),na.attr("rasti")&&na.trigger("change")):qa[oa]="",na.on("change",function(){qa[oa]=na.val()})}var la=$(ja),ma=la.attr("state");return ma?void(void 0===ja.value?la.find("[field]").each(function(na,oa){la=$(oa),ka(la,ma,la.attr("field"))}):ka(la,ma)):W("Missing state prop in [state] attribute of element",ja)}),$(document).trigger("rasti-ready")},get:function(aa){if(!Y.active.page||!Y.active.page.length)return X("Cannot get(%s), active page is not defined",aa);var ba=Y.active.page.find("["+aa+"]");return ba.length||X("Cannot get(%s), element not found in page [%s]",aa,Y.active.page.attr("page")),ba},set:function(aa,ba){if(!Y.active.page||!Y.active.page.length)return X("Cannot set(%s), active page is not defined",aa);var ca=Y.active.page.find("["+aa+"]");ca.length||X("Cannot set(%s), element not found in page [%s]",aa,Y.active.page.attr("page")),ca.each(function(da,ea){ea.value=ba,$(ea).change()})},add:function(aa,...ba){if(!Y.active.page||!Y.active.page.length)return X("Cannot add(%s), active page is not defined",aa);var ca=Y.active.page.find("["+aa+"]");ca.length||X("Cannot add(%s), element not found in page [%s]",aa,Y.active.page.attr("page")),ca.each(function(da,ea){ba.forEach(function(fa){v.array(fa)?ea.value=ea.value.concat(fa):ea.value.push(fa)}),$(ea).change()})},navTo:E,render:F,setLang:H,setTheme:G,updateBlock:I,toggleFullScreen:function(){var ba="moz webkit".split(" ");ba.forEach(function(ca){ca+"FullscreenElement"in document&&(document[ca+"FullscreenElement"]?document[ca+"CancelFullScreen"]&&document[ca+"CancelFullScreen"]():document.documentElement[ca+"RequestFullScreen"]())})}})}},{"./blocks/all":1,"./utils":8}],8:[function(j,k){function q(B){var C=Object.prototype.toString.call(B);return C.substring(8,C.length-1).toLowerCase()}const A={};"object function array string number regex boolean".split(" ").forEach(function(B){A[B]=function(C){return q(C)===B}}),k.exports={is:A,type:q,sameType:function(B,C){return q(B)===q(C)},checkData:function(B){switch(typeof B){case"string":B={value:B,label:B,alias:B.toLowerCase()};break;case"object":A.string(B.value)&&A.string(B.label)?A.string(B.alias)?B.alias=B.alias.toLowerCase()+" "+B.value.toLowerCase():(B.alias&&(error("Invalid data property \"alias\" (must be a string):",B),invalidData++),B.alias=B.value.toLowerCase()):(error("Invalid data object (must have string properties \"value\" and \"label\"):",B),invalidData++,B={value:"",label:"INVALID DATA",alias:""});break;default:error("Invalid data (must be a string or an object):",B),invalidData++,B={value:"",label:"INVALID DATA",alias:""};}return B},random:function(){return(0|6*Math.random())+1},onMobile:function(){return 500>window.innerWidth},rastiError:function(B,...C){this.msg=B,this.el=C.pop(),this.args=C}}},{}]},{},[7])(7)});