(function(c){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=c();else if("function"==typeof define&&define.amd)define([],c);else{var h;h="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,h.rasti=c()}})(function(){return function b(v,k,y){function x(w,M){if(!k[w]){if(!v[w]){var A="function"==typeof require&&require;if(!M&&A)return A(w,!0);if(C)return C(w,!0);var N=new Error("Cannot find module '"+w+"'");throw N.code="MODULE_NOT_FOUND",N}var E=k[w]={exports:{}};v[w][0].call(E.exports,function(D){var P=v[w][1][D];return x(P?P:D)},E,E.exports,b,v,k,y)}return k[w].exports}for(var C="function"==typeof require&&require,j=0;j<y.length;j++)x(y[j]);return x}({1:[function(b,v){v.exports={buttons:b("./buttons"),checks:b("./checks"),radios:b("./radios"),multi:b("./multi"),select:b("./select")}},{"./buttons":2,"./checks":3,"./multi":4,"./radios":5,"./select":6}],2:[function(b,v){const y=b("../utils");v.exports={template:function(x){var j="";for(var w of x)w=y.checkData(w),j+=`<div value="${w.value}">${w.label}</div>`;return j},init:function(x){x.find("div").click(function(){var j=$(this);j.parent().val(j.attr("value")).trigger("change")}),x.change(function(){var j=$(this);j.children().removeClass("active"),j.find("[value=\""+j.val()+"\"]").addClass("active")})},style:`[block=buttons] > div {display: inline-block;margin: 5px !important;padding: 5px 10px;border-radius: 6px;border: 2px outset rgba(255, 255, 255, 0.5);background-clip: padding-box;cursor: pointer;}[block=buttons] > div.active {filter: contrast(1.5);border-style: inset;padding: 4px 11px 6px 9px;transform: translateY(-1px);}`}},{"../utils":8}],3:[function(b,v){const y=b("../utils");v.exports={template:function(x){var j=y.random(),w="";for(var M of x)M=y.checkData(M),w+=`<div><input type="checkbox" name="${j}[]" value="${M.value}"><label>${M.label}</label></div>`;return w},init:function(x){x[0].value=[],x.find("input").change(function(){var j=$(this),w=j.attr("value"),M=j.closest("[block=checks]")[0].value;j.prop("checked")?M.push(w):M.remove(w)}),x.find("input +label").click(function(){var j=$(this);j.prev().click()}),x.change(function(){var w,M,j=$(this);j.find("input").each(function(A,N){w=$(N),M=j[0].value.includes(w.attr("value")),w.prop("checked",M)})})},style:`[block=checks]>div {height: 24px;padding-top: 5px}`}},{"../utils":8}],4:[function(b,v){const y=b("../utils");v.exports={template:function(x,C){var j=C[0].hasAttribute("filter")?`<input field type="text" placeholder="${C.attr("filter")||self.options.multiFilterText}"/>`:"";for(var w of x)w=y.checkData(w),j+=`<option value="${w.value}" alias="${w.alias}">${w.label}</option>`;return j},init:function(x){function C(){var D=N.children().length,P=j.value.length-D,z=D>=(j.max||j.total);return z?(0<P&&(j.value=j.value.slice(0,D),rasti.warn("Dropped %s overflowed values in el:",P,j)),x.addClass("full"),y.onMobile()&&M.parent().removeClass("backdrop"),M.hide()):x.removeClass("full"),z}var j=x[0],w=x.attr("field"),M=x.closest("[page]").find("[options="+w+"]"),A=y.is.number(j.total);if(j.value=[],j.total=M.children().length,j.max=parseInt(x.attr("max")),A)return x.find("[selected]").empty(),void x.removeClass("full");x.prepend("<div add>"),x.append("<div selected>");var N=x.find("[selected]");x.on("click",function(){M.siblings("[options]").hide(),y.onMobile()&&M.parent().addClass("backdrop"),M.css("left",this.getBoundingClientRect().right).show(),M.find("input").focus()}),x.closest("[page]").on("click","*:not(option)",function(D){$(D.target).attr("field")===w||$(D.target).parent().attr("field")===w||(y.onMobile()&&M.parent().removeClass("backdrop"),M.hide())});var E=function(D){D.stopPropagation(),M.find("input").focus();var P=$(D.target),z=P.attr("value"),L=x[0].value;P.parent().attr("options")?(x.find("[selected]").append(P),L.push(z)):(M.append(P),L.remove(z)),C(),x.trigger("change",{ui:!0})};x.on("click","option",E),M.on("click","option",E),M.on("click",function(){M.find("input").focus()}),M.on("input","input",function(){this.value?M.find("option").hide().filter("[alias*="+this.value+"]").show():M.find("option").show()}),x.on("change",function(D,P){if(!(P&&P.ui)){N.children().each(function(L,T){M.append(T)});for(var z of j.value)if(N.append(M.find("[value="+z+"]")),C())break}})},style:`[block=multi] {position: relative;min-height: 35px;padding-right: 20px;text-shadow: 0 0 0 #000;cursor: pointer;}[block=multi] [add] {display: flex;align-items: center;position: absolute;right: 0;top: 0;height: 100%;width: 20px;border-left: 1px solid rgba(0,0,0,0.2);}[block=multi] [add]:before {content: '〉';padding-top: 2px;padding-left: 6px;}[block=multi].open [add] {box-shadow: inset 0 0 2px #000;}[block=multi].full {padding-right: 5px;}[block=multi].full [add] {display: none;}[block=multi] option {padding: 2px 0;}[block=multi] option:before {content: '✕';display: inline-block;box-sizing: border-box;height: 20px;width: 20px;margin-right: 5px;border-radius: 50%;text-align: center;line-height: 1.5;}[block=multi] [selected] {max-height: 100px;overflow-y: auto;}[block=multi] [selected]>option:hover:before {color: #d90000;background-color: rgba(255, 0, 0, 0.5);}[block=multi][options] {display: none;position: absolute;top: 0;width: 250px;height: 100%;padding: 5px 10px;border: 1px solid;z-index: 10;overflow-y: auto;}[block=multi][options]>option:before {transform: rotate(45deg);}[block=multi][options]>option:hover:before {color: #008000;background-color: rgba(0, 128, 0, 0.5);}[block=multi][options] input {border: 1px solid #000;margin: 10px 0;}`}},{"../utils":8}],5:[function(b,v){const y=b("../utils");v.exports={template:function(x){var j=y.random(),w="";for(var M of x)M=y.checkData(M),w+=`<div><input type="radio" name="${j}[]" value="${M.value}"><label>${M.label}</label></div>`;return w},init:function(x){x.find("input").change(function(){var j=$(this);j.closest("[block=radios]").val(j.attr("value"))}),x.find("input +label").click(function(){var j=$(this);j.prev().click()}),x.change(function(){var j=$(this);j.find("[value=\""+j.val()+"\"]").prop("checked",!0)})},style:`[block=radios]>div {height: 24px;padding-top: 5px}`}},{"../utils":8}],6:[function(b,v){const y=b("../utils");v.exports={template:function(x){var j="";for(var w of x)w=y.checkData(w),j+=`<option value="${w.value}">${w.label}</option>`;return j},init:function(x){var C=x.attr("img");if(C){var j=x.find("[selected]"),w=$("<div select>"),M=$("<div options>");$.each(x[0].attributes,function(){w.attr(this.name,this.value)}),x.wrap(w),w=x.parent(),w.append("<div caret>&#9660</div>"),x.attr("data")||x.find("option").each(function(N){M.append(`<div value="${N.value}">${N.innerHTML}</div>`)}),w.append(M),M=M.children();var A=j.length?j.index():0;M[A].classList.add("selected"),w.val(x.val()||M[A].getAttribute("value")),setImg(w,C),M.each(function(N,E){setImg($(E),C)}),M.click(function(){var E=$(this);E.siblings().removeClass("selected"),E.addClass("selected");var D=E.closest("[select]");D.val(E.attr("value"));var P=D.attr("img");P&&setImg(D,P)}),x.remove()}},style:`[select] select {display: none;}[select] {cursor: pointer;border-radius: 4px;}[select]:hover [options] {display: block;}[select] [options] {display: none;position: absolute;margin-top: 42px;margin-left: -4px;border: 4px solid #b9b9b9;border-radius: 4px;}[select] [options] div:hover {border: 4px solid #fff;}[select] [options] div.selected {border: 2px solid #0f97bd;}[select] [caret] {float: right;margin-top: 15px;margin-right: 5px;font-size: small;}[select][img] {padding: 0;}`}},{"../utils":8}],7:[function(b,v){(function(y){var j=b("./utils"),w=j.is,M=j.type,A=j.sameType,N={persist:!1,history:!1,root:"",theme:"base",lang:"",stats:"%n results in %t seconds",noData:"No data available"},E={phone:500,tablet:800},D={};for(var P in E)D[P]=window.matchMedia(`(max-width: ${E[P]}px)`).matches;var z=function(..._){-1!=I.options.log.search(/debug/i)&&console.log.call(this,..._)},L=function(..._){-1!=I.options.log.search(/(warn)|(debug)/i)&&console.warn.call(this,..._)},T=function(..._){console.error.call(this,..._)},I=function(_,F){function R(fe){if(!pe.active.page||!pe.active.page.length)return T("Cannot get(%s), active page is not defined",fe);var he=pe.active.page.find("["+fe+"]");return he.length||T("Cannot get(%s), element not found in page [%s]",fe,pe.active.page.attr("page")),he}function V(fe,he,me){if(!fe)return T("Cannot navigate, page undefined");var be=pe.pages[fe],ve=F.find("[page="+fe+"]");return ve.length?void(pe.active.page=ve,he&&!w.object(he)&&L("Page [%s] nav params must be an object!",fe),be&&be.nav&&(w.function(be.nav)?be.nav(he):L("Page [%s] nav property must be a function!",fe)),F.find("[page].active").removeClass("active"),pe.active.page.addClass("active"),F.trigger("rasti-nav"),me||(be&&be.url?w.string(be.url)?window.history.pushState(fe,null,"#"+be.url):L("Page [%s] url property must be a string!",fe):window.history.pushState(fe,null))):T("Cannot nav to page [%s]: page container not found",fe)}function q(fe,he,me){var ve,be=pe.templates[fe],ke="Cannot render template [%s]: ";if(!be)return T(ke+"template is not defined",fe);if(w.string(be)&&(ve=be,be=function(Ee){return Ee.map(function(){return ve}).join()}),!w.function(be))return T(ke+"template must be a string or a function",fe);var ye=F.find("[template="+fe+"]");if(!ye.length)return T(ke+"no element bound to template. Please bind one via [template] attribute.",fe);var xe=ye[0];if(!he){var Ce=ye.attr("data");if(!Ce)return T(ke+"no data found for template. Please provide in ajax response or via [data] attribute in element:",fe,xe);if(he=pe.data[Ce],!he)return T(ke+"undefined data source \"%s\" in [data] attribute of element:",fe,Ce,xe)}if(!he.length)return ye.html(`<div msg center textc>${pe.options.noData}</div>`);var je=ye.attr("paging"),we=pe.langs&&pe.langs[pe.active.lang];if(je?K(ye,be,he,we):ye.html(be(he,we)),xe.hasAttribute("stats")){var Me=$("<div section class=\"stats\">");Me.html(pe.options.stats.replace("%n",he.length).replace("%t",me)),ye.prepend(Me)}var Ae=ye.attr("fx");if(Ae){var Ne=I.fx[Ae];if(!Ne)return L("Undefined fx \"%s\" in [fx] attribute of element",Ae,xe);je?Ne(ye.find(".results")):Ne(ye)}}function Y(fe){var he=fe.split(" ")[0],me=pe.themes[he];if(!me)return T("Cannot set theme [%s]: theme not found",he);var be=fe.split(" ")[1]||w.object(me.maps)&&Object.keys(me.maps)[0]||"dark",ve=w.object(me.maps)&&me.maps[be]||pe.themeMaps[be];if(!ve)return T("Theme map [%s] not found",be);z("Setting theme [%s:%s]",he,be),pe.active.theme=he;var ye,xe,Ce,je,we,ke={font:me.font||pe.themes.base.font};for(var Me of Object.keys(ve)){if(!pe.themeMaps.dark[Me])return T("Mapping error in theme [%s]. Incorrect theme map property [%s]",he,Me);for(var Ae in ye=[Ce,je]=ve[Me].split(" "),xe=[me.palette[Ce],me.palette[je]],xe)we=pe.themeMaps.dark[Me].split(" ")[Ae],we&&!xe[Ae]&&(xe[Ae]=pe.themes.base.palette[ye[Ae]],!xe[Ae]&&(L("Mapping error in theme [%s] for attribute [%s]. Color [%s] not found. Falling back to default color [%s].",he,Me,ye[Ae],we),xe[Ae]=pe.themes.base.palette[we]));ke[Me]=xe}F.find("style[theme]").html(ie(ke));for(var Ne of Object.keys(me.palette)){var Ee=me.palette[Ne];F.find("."+Ne).css("background-color",Ee)}}function Q(fe){var he=pe.langs[fe],me="Cannot set lang [%s]: ";if(!he)return T(me+"lang not found",fe);if(!w.object(he))return T(me+"lang must be an object!",fe);z("Setting lang [%s]",fe),pe.active.lang=fe;var ve,ke,ye,be=$(),xe="label header text placeholder".split(" ");xe.forEach(function(Ce){be=be.add("["+Ce+"]")}),be.each(function(Ce,je){for(var we in je.hasAttribute("fixed")&&(je=je.children[0]),ve=$(je),ke=je.langkeys,ke||(ke={},xe.forEach(function(Me){ve.attr(Me)&&(ke[Me]=ve.attr(Me))}),je.langkeys=ke),ke)ye=se(fe,ke[we]),"text"==we?ve.text(ye||ke[we]):ye?ve.attr(we,ye):null}),Object.keys(pe.defaults).forEach(function(Ce){pe.options[Ce]=he["rasti_"+Ce]||pe.defaults[Ce]})}function H(fe,he){function me(we){if(xe.html(ke.template(we,fe)),ce){var Me=fe.attr("field"),Ae=fe.closest("[page]").attr("page");L("Detected %s invalid data entries for field [%s] in page [%s]",ce,Me,Ae),ce=0}}var be=fe[0],ve="SELECT"==be.nodeName?"select":fe.attr("block");if(!ve)return T("Missing block type in [block] attribute in element:",be);var ke=I.blocks[ve];if(!ke)return T("Undefined block type \"%s\" declared in [block] attribute of element:",ve,be);if(!he){var ye=le(fe,"data");if(!ye)return;if(he=pe.data[ye],!he)return T("Undefined data source \"%s\" resolved for element:",ye,be)}var xe,Ce;if("multi"===ve){var Ce=fe.attr("field");if(!Ce)return T("Missing field name in [field] attribute of element:",be);xe=fe.closest("[page]").find("[options="+Ce+"]"),xe.length||(xe=$("<div field block="+ve+" options="+Ce+">"),fe.closest("[page]").children(".page-options").append(xe))}else xe=fe;w.function(he)?he(me):me(he)}function X(fe){function he(we){return pe.active.page.find(we).length||pe.active.page.attr("page")===we.attr("page")}var me=fe[0],be=me.hasAttribute("page")?fe.children("[panel]"):me.hasAttribute("panel")?fe.children("[section]"):void 0;if(!be)return T("[tabs] attribute can only be used in pages or panels, was found in element:",me);var ye,xe,Ce,ve=$("<div class=\"tab-labels\">"),ke=$("<div class=\"bar\">");be.each(function(we,Me){ye=$(Me),ye.attr("tab",we),xe=le(ye,"tab-label")||"TAB "+(we+1),ve.append($(`<div tab-label=${we} text="${xe}">`))}),ve.append(ke).prependTo(fe);var je=be.wrapAll("<div h-flow>").parent();ve.on("click",function(we){var Me=$(we.target),Ae=Me.attr("tab-label"),Ne=be.filter(`[tab="${Ae}"]`);be.removeClass("active"),Ne.addClass("active")[0].scrollIntoView(),ve.children().removeClass("active"),Me.addClass("active")}),je.on("scroll",function(){Ce=this.scrollLeft/this.scrollWidth,ke.css({left:Ce*this.offsetWidth})}),F.on("rasti-nav",function(){he(fe)&&(ke.css({width:je[0].offsetWidth/be.length}),!ve.children(".active").length&&ve.children().first().click())}),$(window).on("resize",function(){he(fe)&&(ve.find(".active").click(),ke.css({width:je[0].offsetWidth/be.length}))})}function G(fe){var he=fe[0],me="SELECT"==he.nodeName?"select":fe.attr("block");if(!me)return T("Missing block type in [block] attribute in element:",he);var be=I.blocks[me];return be?void(he.hasAttribute("data")&&H(fe),be.init(fe)):T("Undefined block type \"%s\" declared in [block] attribute of element:",me,he)}function Z(){pe._history=new ge,Object.defineProperty(pe,"history",{get:function(){return pe._history.content}}),Object.defineProperties(pe.history,{back:{value:pe._history.back},forth:{value:pe._history.forth}})}function K(fe,he,me,be){function ve(Ae){$results.html(he(Ae,be)),$controls.find(".page").html(Ce.page+"/"+Ce.total),w.function(ye)&&ye($results)}var je,we,Me,ke=fe.attr("template"),ye=fe.attr("fx")&&I.fx[fe.attr("fx")],xe=parseInt(fe.attr("paging")),Ce=te(ke,me,xe);fe[0].hasAttribute("columns")&&(we=`<div class="columns floatl ib_"><label>Columns:</label><button btn>1</button><button btn value=2>2</button><button btn value=3>3</button></div>`),1<Ce.total&&(je=`<div class="paging ib ib_"><button class="btn prev">&lt;</button><span class="page"></span><button class="btn next">&gt;</button></div>`),Me=`<div class="sizes floatr ib_"><label>Page size:</label><button btn value=5>5</button><button btn value=10>10</button><button btn value=20>20</button></div>`,fe.html(`<div class="results scrolly"></div><div class="controls small bottom centerx ib_">${we||""}${je||""}${Me}</div>`),$controls=fe.children(".controls"),$results=fe.children(".results"),$controls.on("click",".next",function(){ve(Ce.next())}),$controls.on("click",".prev",function(){ve(Ce.prev())}),$controls.on("click",".sizes button",function(){Ce.setPageSize(this.value),ve(Ce.next()),1<Ce.total?$controls.find(".paging").show():$controls.find(".paging").hide()}),$controls.on("click",".columns button",function(){$results.removeClass("columns-2 columns-3").addClass(this.value?"columns-"+this.value:"")}),$results.html(he(Ce.next(),be)),$controls.find(".page").html(Ce.page+"/"+Ce.total)}function te(fe,he,me){let be=new ue(fe,he,me);return pe.pagers.set(fe,be),be}function ne(fe,he){var me=pe.ajax[fe];if(!w.function(me))return T("Ajax method ["+fe+"] is not defined");var be=F.find("[ajax="+fe+"]");if(!be.length)return T("No container element bound to ajax method [%s]. Please bind one via [ajax] attribute",fe);var ke,ve={};be.find("[field]").each(function(ye,xe){$el=$(xe),ke=$el.attr("field"),ke&&(ve[ke]=$el.val()||$el.attr("value"))}),me(ve,he)}function ie(fe){var he=`[rasti=${pe.name}]`;return`${he} {font: ${fe.font};color: ${fe.text[0]};}${he} [page]    { background-color: ${fe.page[0]}; }${he} [panel]   { background-color: ${fe.panel[0]}; }${he} [section] { background-color: ${fe.section[0]}; }${he} [page][header]:before,[page][footer]:after     { background-color: ${fe.page[1]}; }${he} [panel][header]:before   { background-color: ${fe.panel[1]}; }${he} [section][header]:before { background-color: ${fe.section[1]}; }${he} .tab-labels        { background-color: ${fe.panel[0]}; }${he} .tab-labels > .bar { background-color: ${fe.btn[0]}; }${he} [field] {background-color: ${fe.field[0]};color: ${fe.field[1]};}${he} [btn], .btn, [block=buttons] > div {background-color: ${fe.btn[0]};color: ${fe.btn[1]}; }${he} [header]:before { color: ${fe.header[0]}; }${he} [label]:not([header]):before  { color: ${fe.label[0]}; }`}function se(fe,he){if(!w.object(pe.langs[fe]))return void T("Lang [%s] is not defined",fe);var me=pe.langs[fe][he];return w.string(me)?me:void L("Lang [%s] does not contain key [%s]",fe,he)}function le(fe,he){var me=fe.attr(he)||fe.attr("field")||fe.attr("section")||fe.attr("panel")||fe.attr("page");return me||L("Could not resolve value of [%s] attribute in el:",he,fe[0]),me}function oe(fe){var he=$(`<div fixed label="${fe.attr("label")}" >`);fe.wrap(he),fe[0].removeAttribute("label")}var de="Cannot create rasti app: ";if(!w.string(_))return T(de+"app must have a name!");if(this.name=_.replace(" ",""),!F)F=$("body");else if(!F.selector)if(w.string(F)||F.tagName&&-1!="BODY DIV".search(F.tagName))F=$(F);else return T(de+"app container is invalid. Please provide a selector string, a jQuery object ref or a DOM element ref");F.attr("rasti",this.name);var pe=this,ce=0;this.active={page:null,theme:"",lang:""},this.pagers=new Map,this.options=Object.assign({},N),this.defaults={stats:pe.options.stats,noData:pe.options.noData},this.state={},Object.defineProperties(pe.state,{page:{get:function(){return pe.active.page.attr("page")},enumerable:!0},theme:{get:function(){return pe.active.theme},enumerable:!0},lang:{get:function(){return pe.active.lang},enumerable:!0},save:{value:function(){localStorage.setItem("rasti."+pe.name,JSON.stringify(pe.state)),z("State saved")}},get:{value:function(){function fe(){T("Saved state for app [%s] is invalid",pe.name)}var he;try{if(he=JSON.parse(localStorage.getItem("rasti."+pe.name)),!he)z("No saved state found for app [%s]",pe.name);else if(!w.object(he))fe();else return he}catch(me){fe()}}},restore:{value:function(){var fe=pe.state.get();if(fe){for(let he in z("Restoring state..."),fe)pe.state[he]=fe[he];fe.theme&&Y(fe.theme),fe.lang&&Q(fe.lang),V(fe.page),z("State restored")}return fe}},clear:{value:function(){localStorage.removeItem("rasti."+pe.name)}}}),this.pages={},this.data={},this.ajax={},this.utils={is:w,type:M,sameType:A},this.templates={},this.langs={},this.themes={base:{font:"normal 14px sans-serif",palette:{white:"#fff",lighter:"#ddd",light:"#bbb",mid:"#888",dark:"#444",darker:"#222",black:"#000",detail:"darkcyan",lighten:"rgba(255,255,255,0.1)",darken:"rgba(0,0,0,0.1)"}}},this.themeMaps={dark:{page:"darker lighten",panel:"dark lighten",section:"mid lighten",field:"light darker",btn:"detail darker",header:"darker",label:"darker",text:"darker"},light:{page:"lighter darken",panel:"mid lighten",section:"light darken",field:"lighter dark",btn:"detail light",header:"dark",label:"mid",text:"dark"}};class ge{constructor(){this.i=0,this.content=[]}back(){0<this.i&&V(this.content[--this.i])}forth(){this.i<this.content.length&&V(this.content[++this.i])}push(fe){this.content.splice(this.i,null,fe),this.i++}}class ue{constructor(fe,he,me){return(this.id=fe,!w.string(fe))?T("Pager id must be a string"):(this.logid=`Pager for template [${this.id}]:`,w.array(he)?w.number(me)?void(this.results=he,this.page_size=me,this.page=0,this.total=Math.ceil(this.results.length/this.page_size)):T("%s Page size must be a number",this.logid):T("%s Results must be an array",this.logid))}next(){return this.hasNext()?this.page++:L("%s No next page",this.logid),this.getPageResults(this.page)}prev(){return this.hasPrev()?this.page--:L("%s No previous page",this.logid),this.getPageResults(this.page)}hasNext(){return this.results.length>this.page*this.page_size}hasPrev(){return 1<this.page}setPageSize(fe){return fe=parseInt(fe),w.number(fe)?void(this.page_size=fe,this.page=0,this.total=Math.ceil(this.results.length/this.page_size)):T("%s Must specify a number as the page size",this.logid)}getPageResults(fe){if(!w.number(fe))return T("%s Must specify a page number to get results from",this.logid),[];try{var he=(fe-1)*this.page_size;return this.results.slice(he,he+this.page_size)}catch(me){return T("%s Could not get results of page %s, error:",this.logid,fe,me),[]}}}return function(){Array.prototype.remove=function(fe){var he=this.indexOf(fe);0<=he&&this.splice(he,1)},String.prototype.capitalize=function(){return this.length&&this[0].toUpperCase()+this.slice(1).toLowerCase()}}(),Object.freeze({options:this.options,history:this.history,state:this.state,pages:this.pages,data:this.data,ajax:this.ajax,utils:this.utils,langs:this.langs,themes:this.themes,themeMaps:this.themeMaps,templates:this.templates,extend:function(fe){if(!fe||!w.object(fe))return T("Cannot extend app: no properties found");for(var he in pe)"object"===$.type(pe[he])&&"object"===$.type(fe[he])&&Object.assign(pe[he],fe[he])},init:function(fe){fe&&(w.object(fe)?Object.keys(pe.options).forEach(function(ye){fe[ye]&&(A(pe.options[ye],fe[ye])?pe.options[ye]=fe[ye]:L("Init option [%s] is invalid",ye))}):L("Init options must be an object!")),Object.keys(pe.defaults).forEach(function(ye){pe.options[ye]||(pe.options[ye]=pe.defaults[ye])}),pe.options.lang||(keys=Object.keys(pe.langs),keys.length&&(pe.options.lang=keys[0])),F.append("<style theme>"),F.find("[page]").each(function(ye,xe){$(xe).append("<div class=\"page-options\">")}),F.find("[block]").each(function(ye,xe){G($(xe))}),F.find("select[data]").each(function(ye,xe){H($(xe))}),F.find("[tabs]").each(function(ye,xe){X($(xe))}),(D.tablet||D.phone)&&F.find("[tabs-tablet]").each(function(ye,xe){X($(xe))}),D.phone&&F.find("[tabs-phone]").each(function(ye,xe){X($(xe))}),F.find("[nav]").click(function(){var xe=$(this),Ce=xe.attr("nav"),je={};if(!Ce)return T("Missing page name in [nav] attribute of element:",el);if(this.hasAttribute("params")){var Ae,we=pe.active.page,Me=xe.attr("params");Me?(Me=Me.split(" "),Me.forEach(function(Ne){Ae=we.find("[navparam="+Ne+"]"),Ae.length?je[Ne]=Ae.val():L("Could not find navparam element [%s]",Ne)})):we.find("[navparam]").each(function(Ne,Ee){xe=$(Ee),key=le(xe,"navparam"),key&&(je[key]=xe.val())})}V(Ce,je)}),F.find("[submit]").click(function(){var Ne,xe=$(this),Ce=xe.attr("submit"),je=xe.attr("then"),we=xe.attr("render"),Me=je&&w.function(pe.utils[je]),Ae=window.performance.now();return Ce?void(je&&!Me&&T("Undefined utility method [%s] declared in [then] attribute of el:",je,this),xe.addClass("loading").attr("disabled",!0),ne(Ce,function(Ee){Ne=window.performance.now();var De=Math.floor(Ne-Ae)/1e3;z("Ajax method [%s] took %s seconds",Ce,De),Me&&pe.utils[je](Ee),we&&q(we,Ee,De),xe.removeClass("loading").removeAttr("disabled")})):T("Missing ajax method in [submit] attribute of el:",this)}),F.find("[render]").not("[submit]").click(function(){var xe=$(this),Ce=xe.attr("render");return Ce?void q(Ce):T("Missing template name in [render] attribute of element:",el)});for(var he of"click change hover load".split(" "))F.find("[on-"+he+"]").each(function(ye,xe){var Ce=$(xe),je=Ce.attr("on-"+he);if(!je)return T("Missing utility method in [%s] attribute of element:",he,xe);var we=pe.utils[je];return we?void Ce.on(he,we).removeAttr("on-"+he):T("Undefined utility method \"%s\" declared in [on-%s] attribute of element:",je,he,xe)});for(var he of"show hide toggle".split(" "))F.find("["+he+"]").each(function(ye,xe){var Ce=$(xe),je=Ce.attr(he);if(!je)return T("Missing target selector in [%s] attribute of element:",he,xe);var we=R(je);return we.length?void Ce.on("click",function(){we[he]()}).removeAttr(he):T("Could not find target [%s] declared in [%s] attribute of element:",je,he,xe)});var me,be;for(var ve in pe.pages){if(me=pe.pages[ve],!w.object(me))return T("pages.%s must be an object!",ve);if(be=F.find("[page="+ve+"]"),!be.length)return T("No container found for page \"%s\". Please bind one via [page] attribute",ve);if(me.init){if(!w.function(me.init))return T("pages.%s.init must be a function!",ve);z("Initializing page [%s]",ve),pe.active.page=be,me.init()}}"header label".split(" ").forEach(function(ye){var xe;F.find("["+ye+"]").each(function(Ce,je){xe=$(je),xe.attr(ye)||xe.attr(ye,le(xe,ye))})}),"input select textarea".split(" ").forEach(function(ye){F.find(ye+"[label]").each(function(xe,Ce){oe($(Ce))})}),window.onpopstate=function(ye){var xe=ye.state||location.hash.substring(1);xe?ye.state?V(xe,null,!0):V(xe):V(pe.options.root)},pe.options.history&&Z();var ke;if(pe.options.persist&&(ke=pe.state.restore(),$(window).on("beforeunload",function(){pe.state.save()})),!pe.options.persist||!ke){pe.options.lang&&!pe.active.lang&&Q(pe.options.lang),pe.options.lang||F.find("[text]").each(function(ye,xe){$(xe).text($(xe).attr("text"))}),pe.active.theme||Y(pe.options.theme);var me=location.hash.substring(1)||pe.options.root;V(me&&pe.pages[me]?me:F.find("[page]").first().attr("page"))}F.find("[state]").each(function(ye,xe){function Ce(Me,Ae,Ne){var Ee=pe.state;Ne&&(Ee[Ae]=Ee[Ae]||{},Ee=Ee[Ae],Ae=Ne),Ee[Ae]?(Me.val(Ee[Ae]),Me.attr("block")&&Me.trigger("change")):Ee[Ae]="",Me.on("change",function(){Ee[Ae]=Me.val()})}var je=$(xe),we=le(je,"state");we&&(void 0===xe.value?je.find("[field]").each(function(Me,Ae){je=$(Ae),Ce(je,we,je.attr("field"))}):Ce(je,we))}),F.trigger("rasti-ready")},get:R,set:function(fe,he){if(!pe.active.page||!pe.active.page.length)return T("Cannot set(%s), active page is not defined",fe);var me=pe.active.page.find("["+fe+"]");me.length||T("Cannot set(%s), element not found in page [%s]",fe,pe.active.page.attr("page")),me.each(function(be,ve){ve.value=he,$(ve).change()})},add:function(fe,...he){if(!pe.active.page||!pe.active.page.length)return T("Cannot add(%s), active page is not defined",fe);var me=pe.active.page.find("["+fe+"]");me.length||T("Cannot add(%s), element not found in page [%s]",fe,pe.active.page.attr("page")),me.each(function(be,ve){he.forEach(function(ke){w.array(ke)?ve.value=ve.value.concat(ke):ve.value.push(ke)}),$(ve).change()})},navTo:V,render:q,setLang:Q,setTheme:Y,updateBlock:H,toggleFullScreen:function(){var he="moz webkit".split(" ");he.forEach(function(me){me+"FullscreenElement"in document&&(document[me+"FullscreenElement"]?document[me+"CancelFullScreen"]&&document[me+"CancelFullScreen"]():document.documentElement[me+"RequestFullScreen"]())})}})};I.log=z,I.warn=L,I.error=T,I.blocks=b("./blocks/all"),I.fx={stack:function(_){_.children().each(function(F,U){setTimeout(function(){U.style.opacity=1,U.style.marginTop="15px"},50*F)})}},I.options={log:"warn"},v.exports=Object.freeze(I);var S;S=`body {margin: 0;font-family: sans-serif;font-size: 14px;}*, *:before, *:after {box-sizing: border-box;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;transition: background-color 0.2s,font 0.2s;}input {width: 100%;margin: 0;vertical-align: text-bottom;}[page], [panel], [section] {position: relative;overflow: hidden;    }[page] {height: 100vh;width: 100vw;padding-bottom: 15px;margin-bottom: -5px;}[page]:not(.active) {	display: none !important;}[panel] {padding: 20px 15px;border-radius: 4px;}[section] {margin-bottom: 15px;padding: 10px;border-radius: 4px;}[section] [label]:before {text-shadow: 0 0 0 #000;}[section]>*:first-child:not([label]) {margin-top: 0px;}[header][panel] {padding-top: 65px;}[header][section] {padding-top: 55px;}[header][page]:before,[header][panel]:before,[header][section]:before,[footer][page]:after {content: attr(header);display: block;height: 70px;width: 100%;padding: 20px 0;font-size: 2.5em;text-align: center;text-transform: uppercase;}[header][page]:before {margin-bottom: 15px;}[header][panel]:before,[header][section]:before {position: absolute;top: 0; left: 0;}[header][panel]:before {height: 50px;padding: 10px 0;font-size: 2em;}[header][section]:before {height: 40px;padding: 5px 0;font-size: 1.5em;}[footer][page]:after {content: attr(footer);}[page][header][fix-header]:before {position: fixed;top: 0;}[page][footer][fix-footer]:after {position: fixed;bottom: 0;}[field], [btn], .field, .btn {width: 100%;padding: 5px 10px;border: 0;border-radius: 2px;font-family: inherit !important;font-size: inherit;color: #222;}[btn], .btn {height: 50px;border: 1px solid rgba(0,0,0,0.1);font-size: 1.2em;text-transform: uppercase;	cursor: pointer;}[btn]:not(:disabled):hover, .btn:not(:disabled):hover {filter: contrast(1.5);}[btn][disabled], .btn[disabled]{filter: contrast(0.5);}[btn][disabled], .btn[disabled] {cursor: auto;}[panel] [field], [panel] [btn], [panel] [label],[panel] .field, [panel] .btn,[section] [field], [section] [btn], [section] [label],[section] .field, [section] .btn {margin-bottom: 15px;}[btn][ib], [btn].ib, .btn[ib], .btn.ib,[ib_]>[btn], [ib_]>.btn, .ib_>[btn], .ib_>.btn {margin-top: 0;margin-bottom: 0;}[big][field], [big][btn], .big.field , .big.btn,[big].field, [big].btn, .big[field] , .big[btn],[big] [field], [big] [btn], .big .field, .big .btn,[big] .field, [big] .btn, .big [field] , .big [btn] {min-height: 70px;margin-bottom: 25px;font-size: 1.5em;}[small][field], [small][btn], .small.field , .small.btn,[small].field, [small].btn, .small[field] , .small[btn],[small] [field], [small] [btn], .small .field, .small .btn,[small] .field, [small] .btn, .small [field] , .small [btn] {height: 25px;margin-bottom: 15px;font-size: 1em;}[big] [label], .big [label]{margin-top: 25px;font-size: 1.2em;}[big] [label]:before, .big [label]:before {margin-top: -27px;}[big] [label][field]:before, .big [label][field]:before {margin-top: -25px;}[template] > .results {max-height: calc(100% - 40px);margin: 0 -15px;padding: 0 15px;}[template][stats] > .results {max-height: calc(100% - 95px);}[template] > .controls {height: 60px;padding: 15px;color: #fff;text-align: center;}[template] > .stats {height: 40px;font-size: 1.1em;}[h-flow] {display: inline-block !important;white-space: nowrap;height: 100%;width: 100%;overflow-x: auto;overflow-y: hidden;}.tab-labels + [h-flow] {height: calc(100% - 40px);}[h-flow] > * {display: inline-block;white-space: normal;height: 100%;min-width: 100%;border-radius: 0;margin-top: 0;margin-bottom: 0;margin-left: auto !important;margin-right: auto;vertical-align: top;}.tab-labels {display: flex;position: relative;justify-content: space-around;white-space: nowrap;min-width: 100vw;height: 40px;padding: 0;border-bottom: 1px solid rgba(0,0,0, 0.2);border-radius: 0;text-transform: uppercase;z-index: 1;}.tab-labels > .bar {position: absolute;bottom: 0; left: 0;height: 4px;transition: left 0.2s, width 0.2s;}[tab-label] {display: flex;justify-content: center;align-items: center;flex: 1 1 auto;min-width: 50px;max-width: 120px;padding: 5px;font-size: 1.2em;line-height: 1;text-align: center;text-shadow: 0 0 0 #000;cursor: pointer;}[tab-label].active {filter: contrast(1.5);}[modal] {display: none;height: 100%;width: 100%;max-height: 500px;max-width: 500px;}[backdrop]:before, .backdrop:before {content: '';position: fixed;top: 0;left: 0;height: 100vh;width: 100vw;background-color: rgba(0,0,0,0.5)}[label] {margin-top: 25px;vertical-align: bottom;}[label][fixed]>* {margin-bottom: 0;}[label]>input,[label]>select,[label]>textarea {margin-top: 0 !important;}[label]:not([panel]):not([section]):before {content: attr(label);position: absolute;height: 20px;font-size: 1.2em;text-transform: capitalize;}[label][field]:before {margin-top: -27px;margin-left: -7px;}[label][fixed]:before {margin-top: -22px;margin-left: 4px;}[label][field][big]:before {margin-left: 0;}[inline][label], [inline]>[label] {margin-top: 0;margin-bottom: 30px;margin-left: calc(40% + 10px);}[inline][label]:before, [inline]>[label]:before {max-width: 40%;margin-top: 0;margin-left: -40%;}select[field] {appearance: none;-moz-appearance: none;-webkit-appearance: none;padding-right: 25px;background-image: url(../img/caret.png);background-repeat: no-repeat;background-position: right;cursor: pointer;}textarea[field] {height: 70px;resize: none;}input[type=radio],input[type=checkbox] {display: none;}input[type=radio] + label,input[type=checkbox] + label {display: inline-block;max-width: 90%;margin-left: 20px;overflow: hidden;text-overflow: ellipsis;cursor: pointer;}input[type=radio] + label:before,input[type=checkbox] + label:before {content: '\\2713';position: absolute;height: 16px;width: 16px;margin-left: -22px;padding: 0;border: 1px solid #999;color: transparent;background-color: #fff;font: 16px/1em sans-serif;text-align: center;}input[type=radio] + label:before {content: '\\25cf';border-radius: 50%;font-size: 1.3em;line-height: 0.6;}input[type=radio]:checked + label:before,input[type=checkbox]:checked + label:before {color: #222;animation: stamp 0.4s ease-out;}@keyframes stamp {50% { transform: scale(1.2); }}.row, [row] {display: flex;flex-flow: row wrap;width: 100%;}.row > .col-1,  [row] > [col-1]  { flex-basis: calc(08.33% - 15px); }.row > .col-2,  [row] > [col-2]  { flex-basis: calc(16.66% - 15px); }.row > .col-3,  [row] > [col-3]  { flex-basis: calc(25.00% - 15px); }.row > .col-4,  [row] > [col-4]  { flex-basis: calc(33.33% - 15px); }.row > .col-5,  [row] > [col-5]  { flex-basis: calc(41.66% - 15px); }.row > .col-6,  [row] > [col-6]  { flex-basis: calc(50.00% - 15px); }.row > .col-7,  [row] > [col-7]  { flex-basis: calc(58.33% - 15px); }.row > .col-8,  [row] > [col-8]  { flex-basis: calc(66.66% - 15px); }.row > .col-9,  [row] > [col-9]  { flex-basis: calc(75.00% - 15px); }.row > .col-10, [row] > [col-10] { flex-basis: calc(83.33% - 15px); }.row > .col-11, [row] > [col-11] { flex-basis: calc(91.66% - 15px); }.row [class*=col-]:not(:first-child),[row] [col-1]:not(:first-child),[row] [col-2]:not(:first-child),[row] [col-3]:not(:first-child),[row] [col-4]:not(:first-child),[row] [col-5]:not(:first-child),[row] [col-6]:not(:first-child),[row] [col-7]:not(:first-child),[row] [col-8]:not(:first-child),[row] [col-9]:not(:first-child),[row] [col-10]:not(:first-child),[row] [col-11]:not(:first-child) { margin-left: 15px; }.page-options {flex-basis: initial !important;}/* utils */[move] {user-select: none;cursor: move;}[resize] {resize: both;overflow: hidden;}.loading {color: transparent !important;position: relative;}.loading:after {content: '';position: absolute;top: 0; bottom: 0; left: 0; right: 0;width: 25px; height: 25px;margin: auto;border-radius: 50%;border: 0.25rem solid rgba(255, 255, 255, 0.2);border-top-color: white;animation: spin 1s infinite linear;}@keyframes spin {0%   { transform: rotate(0deg); }100% { transform: rotate(360deg); }}@keyframes zoomIn {0%   { transform: scale(0); }100% { transform: scale(1); }}@keyframes zoomOut {0%   { transform: scale(1); }100% { transform: scale(0); }}@keyframes fadeIn {0%   { background: rgba(0,0,0,.0); }100% { background: rgba(0,0,0,.7); }}@keyframes fadeOut {0%   { background: rgba(0,0,0,.7); }100% { background: rgba(0,0,0,.0); }}[ib], .ib,[ib_]>*, .ib_>* {display: inline-block;width: auto;}[floatl], .floatl {float: left;}[floatr], .floatr {float: right;}[textc], .textc,[textc_]>*, .textc_>* {text-align: center;}[autom], .autom,[autom_]>*, .autom_>* {margin: auto !important;}[centerx], .centerx,[centerx_]>*, .centerx_>* {position: absolute;left: 0; right: 0;margin: auto !important;}[centery], .centery,[centery_]>*, .centery_>* {position: absolute;top: 0; bottom: 0;margin: auto !important;}[modal],[center], .center,[center_]>*, .center_>* {position: absolute;left: 0; right: 0; top: 0; bottom: 0;margin: auto !important;}[left], .left,[left_]>*, .left_>* {position: absolute;left: 0;}[right], .right,[right_]>*, .right_>* {position: absolute;right: 0;}[top], .top[top_]>*, .top_>* {position: absolute;top: 0;}[bottom], .bottom,[bottom_]>*, .bottom_>* {position: absolute;bottom: 0;}[fix], .fix {position: fixed;}[fullw], .fullw,[fullw_]>*, .fullw_>* {width: 100%;}[fullh], .fullh,[fullh_]>*, .fullh_>* {height: 100%;}[autow], .autow,[autow_]>*, .autow_>* {width: auto;}[autoh], .autoh,[autoh_]>*, .autoh_>* {height: auto;}[scrollx], .scrollx,[scrollx_]>*, .scrollx_>* {overflow-x: auto;overflow-y: hidden;}[scrolly], .scrolly,[scrolly_]>*, .scrolly_>* {overflow-x: hidden;overflow-y: auto;}[scroll], .scroll,[scroll_]>*, .scroll_>* {overflow: auto;}[columns-2], .columns-2 {display: flex;flex-wrap: wrap;align-content: flex-start;}[columns-2]>*, .columns-2>* {width: 49%;margin-right: 2%;}[columns-2]>*:nth-child(2n),.columns-2>*:nth-child(2n){margin-right: 0;}[columns-3], .columns-3 {display: flex;flex-wrap: wrap;align-content: flex-start;}[columns-3]>*, .columns-3>* {width: 32%;margin-right: 2%;}[columns-3]>*:nth-child(3n),.columns-3>*:nth-child(3n){margin-right: 0;}[msg], .msg {height: 60%;width: 60%;padding: 10% 5%;font-size: large;}[icon], .icon {border: 1px solid #000;font-size: 2em;line-height: 1;z-index: 10;}[round], .round {border-radius: 50%;}/* fx */[fx=stack]:not([paging]) > *,[fx=stack][paging] > .results > * {opacity: 0;margin-top: 100px;transition: opacity 0.5s ease,margin-top 0.5s ease;}.flip-container {perspective: 1000px;position: relative;}.flipper {transition: 0.6s;transform-style: preserve-3d;position: absolute;}.flipper.flip  {transform: rotateY(180deg);}.flipper .front, .flipper .back {backface-visibility: hidden;top: 0;left: 0;}.flipper .front {z-index: 2;transform: rotateY(0deg);}.flipper .back {transform: rotateY(180deg);}/*** MEDIA QUERIES ***//* desktop only */@media only screen and (min-width: 800px) {[cc] {padding-left: 20%;padding-right: 20%;}[cc-s] {padding-left: 30%;padding-right: 30%;}[cc-l] {padding-left: 10%;padding-right: 10%;}}/* tablet only */@media only screen and (min-width: 500px) and (max-width: 800px) {.hide-tablet {display: none;}.show-tablet {display: block;}[header][hh-tablet]:before {display: none;}[header][hh-tablet][page] {padding-top: 0;}[header][hh-tablet][panel] {padding-top: 20px;}[header][hh-tablet][section] {padding-top: 15px;}[cc-tablet] {padding-left: 20%;padding-right: 20%;}[cc-s-tablet] {padding-left: 30%;padding-right: 30%;}[cc-l-tablet] {padding-left: 10%;padding-right: 10%;}}/* tablet and phone */@media only screen and (max-width: 800px) {[page][header]:before {padding: 10px;line-height: 0.8;}}/* phone only */@media only screen and (max-width: 500px) {[page] {padding-bottom: 0;overflow-y: auto;}[class*=col-],[col-1], [col-2], [col-3],[col-4], [col-5], [col-6],[col-7], [col-8], [col-9],[col-10], [col-11]  {min-width: 100%;margin-left: 0;margin-bottom: 15px;}[template] > .controls > .columns > label,[template] > .controls > .sizes > label {display: none;}[options] {bottom: 0;left: 0 !important;right: 0;height: 80% !important;margin: auto;}.hide-phone {display: none;}.show-phone {display: block;}[header][hh-phone]:before {display: none;}[header][hh-phone][page] {padding-top: 0;}[header][hh-phone][panel] {padding-top: 20px;}[header][hh-phone][section] {padding-top: 15px;}[cc-phone] {padding-left: 20%;padding-right: 20%;}[cc-s-phone] {padding-left: 30%;padding-right: 30%;}[cc-l-phone] {padding-left: 10%;padding-right: 10%;}}`,S&&$("body").append("<style>"+S+"</style>"),function(){var _="<style blocks>";for(var F in I.blocks)_+=I.blocks[F].style;_+="</style>",$("body").append(_)}(),function(){var F,U,_=$(document).find("[rasti]");_.length&&_.forEach(function(R){F=R.getAttribute("rasti"),F?y[F]?T("Name [%s] already taken, please choose another name for app in container:",F,R):(y[F]=U=new I(F,R),Object.keys(U.options).forEach(function(W){R.hasAttribute(W)&&(U.options[W]=R.getAttribute(W),w.boolean(N[W])&&!U.options[W]&&(U.options[W]=!0))})):T("Missing app name in [rasti] attribute of app container:",R)})}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./blocks/all":1,"./utils":8}],8:[function(b,v){function y(N){var E=Object.prototype.toString.call(N);return E.substring(8,E.length-1).toLowerCase()}const A={};"object function array string number regex boolean".split(" ").forEach(function(N){A[N]=function(E){return y(E)===N}}),v.exports={is:A,type:y,sameType:function(N,E){return y(N)===y(E)},checkData:function(N){switch(typeof N){case"string":N={value:N,label:N,alias:N.toLowerCase()};break;case"object":A.string(N.value)&&A.string(N.label)?A.string(N.alias)?N.alias=N.alias.toLowerCase()+" "+N.value.toLowerCase():(N.alias&&(error("Invalid data property \"alias\" (must be a string):",N),invalidData++),N.alias=N.value.toLowerCase()):(error("Invalid data object (must have string properties \"value\" and \"label\"):",N),invalidData++,N={value:"",label:"INVALID DATA",alias:""});break;default:error("Invalid data (must be a string or an object):",N),invalidData++,N={value:"",label:"INVALID DATA",alias:""};}return N},random:function(){return(0|6*Math.random())+1},onMobile:function(){return 500>window.innerWidth},rastiError:function(N,...E){this.msg=N,this.el=E.pop(),this.args=E}}},{}]},{},[7])(7)});